Title: Sending Email From A Custom Domain
Date: 2015-02-25 21:27
Category: sornars.com
Tags: email, fastmail

Once you have a blog up and running, the next step is to set yourself up with the ability to send emails from your new domain. When picking an external provider there are many options to choose from. I chose to go with [Fastmail](https://www.fastmail.com) based off of their positive feedback on [Hacker News](https://news.ycombinator.com). 

One of the great things about Fastmail is the extensive documentation. Their how to guides are extremely thorough, for example [this](https://www.fastmail.com/help/receive/domains.html?u=ca104164) page demonstrates how to get your Fastmail account to send emails from a personal domain. Following the guide made the process very straight forward, it was simply a matter of setting the MX records correctly with your domain registrar. Instructions for Namecheap can be found [here](https://www.namecheap.com/support/knowledgebase/article.aspx/322/78/how-can-i-setup-mx-record-for-my-domain). Fastmail prefers you to set your domain's nameserver to them but as I wanted to go the hard route to better understand how all the pieces of web hosting fit together, it's certainly easier to let them do the hard work.

The last tricky bit was getting the DKIM keys set up correctly. Without completing this step you can still send emails but your they will be routed through a different domain (messagingengine.com) and this will be visible to the recipient. The end result is that a failure to sign your emails tends to make you look like a spammer. Fastmail states that your keys must be added as a TXT Record in the format of mesmtp._domainkey.yourdomain.com; however, Namecheap automatically appends the '.yourdomain.com' bit to the end of the TXT records entered into the admin panel. To get signed emails working correctly I simply had to change the record name to 'mesmtp._domainkey'. 

One last thing I did for convenience was setup a subdomain on this site that allowed me to check my email without going to fastmail.com. All that was required was creating a CNAME record which directed users to www.fastmail.fm.

And with that we've covered almost all of the main features required by a personal blog. You may be wondering why I chose to go with so many disparate service providers when almost all of them could have been done within a single organisation, eg. Amazon offers domain registration through [Route 53](https://aws.amazon.com/route53), Namecheap offers an email service and webhosting, etc. One valid reason to go with different providers is so you can choose best in class specialists in each area but my reason for doing so was far simpler; a one stop shop service, while convenient, tends to abstract away many of the details by streamlining the background processes. I created this blog as an educational exercise and I'm glad I got to learn a bit more about the DNS system, DKIM keys and all of the little details of web hosting; an experience that was enhanced by requiring me to link up these different systems. If you're thinking about setting up a blog of your own then I heartily recommend that you do the same.